{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst datetimePicker = document.querySelector('#datetime-picker');\nconst clockfaceDays = document.querySelector('[data-days]');\nconst clockfaceHours = document.querySelector('[data-hours]');\nconst clockfaceMinutes = document.querySelector('[data-minutes]');\nconst clockfaceSeconds = document.querySelector('[data-seconds]');\nconst startBtn = document.querySelector('button[data-start]');\nstartBtn.disabled = true;\n\nlet userSelectedDate = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0]);\n\n        userSelectedDate = new Date(selectedDates[0]);\n        if(userSelectedDate < Date.now()) {\n            startBtn.disabled = true;\n            iziToast.error({\n                title: 'Error',\n                titleColor: 'white',\n                message: 'Please choose a date in the future',\n                messageColor: 'white',\n                position: 'topRight',\n                backgroundColor: 'red',\n            });\n            return;\n        }\n\n        startBtn.disabled = false;\n    },\n};\n\nclass Timer {\n    constructor() {\n        this.interval = null;\n    }\n\n    start() {\n        startBtn.disabled = true;\n        datetimePicker.disabled = true;\n\n        const targetTime = userSelectedDate.getTime();\n        this.interval = setInterval(() => {\n            const currentTime = Date.now();\n            const delta = targetTime - currentTime;\n\n            if (delta <= 0) {\n                clearInterval(this.interval);\n                this.updateClockface({ days: '00', hours: '00', minutes: '00', seconds: '00' })\n                datetimePicker.disabled = false;\n                return;\n            }\n\n            const time = this.convertMs(delta);\n            this.updateClockface(time);\n        }, 1000);\n    }\n\n    convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n    \n        const days = this.addLeadingZero(Math.floor(ms / day));\n        const hours = this.addLeadingZero(Math.floor((ms % day) / hour));\n        const minutes = this.addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n        const seconds = this.addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n    \n        return { days, hours, minutes, seconds };\n    }\n\n    addLeadingZero(value) {\n        return String(value).padStart(2, '0');\n    }\n\n    updateClockface({ days, hours, minutes, seconds }) {\n        clockfaceDays.textContent = days;\n        clockfaceHours.textContent = hours;\n        clockfaceMinutes.textContent = minutes;\n        clockfaceSeconds.textContent = seconds;\n    }\n}\nconst timer = new Timer();\n\nstartBtn.addEventListener(\"click\", timer.start.bind(timer));\n\nflatpickr(\"#datetime-picker\", options);\n"],"names":["datetimePicker","clockfaceDays","clockfaceHours","clockfaceMinutes","clockfaceSeconds","startBtn","userSelectedDate","options","selectedDates","iziToast","Timer","targetTime","currentTime","delta","time","ms","days","hours","minutes","seconds","value","timer","flatpickr"],"mappings":"+IAQA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAgB,SAAS,cAAc,aAAa,EACpDC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,SAAW,GAEpB,IAAIC,EAAmB,KAEvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAInB,GAHA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAE5BF,EAAmB,IAAI,KAAKE,EAAc,CAAC,CAAC,EACzCF,EAAmB,KAAK,MAAO,CAC9BD,EAAS,SAAW,GACpBI,EAAS,MAAM,CACX,MAAO,QACP,WAAY,QACZ,QAAS,qCACT,aAAc,QACd,SAAU,WACV,gBAAiB,KACjC,CAAa,EACD,MACH,CAEDJ,EAAS,SAAW,EACvB,CACL,EAEA,MAAMK,CAAM,CACR,aAAc,CACV,KAAK,SAAW,IACnB,CAED,OAAQ,CACJL,EAAS,SAAW,GACpBL,EAAe,SAAW,GAE1B,MAAMW,EAAaL,EAAiB,UACpC,KAAK,SAAW,YAAY,IAAM,CAC9B,MAAMM,EAAc,KAAK,MACnBC,EAAQF,EAAaC,EAE3B,GAAIC,GAAS,EAAG,CACZ,cAAc,KAAK,QAAQ,EAC3B,KAAK,gBAAgB,CAAE,KAAM,KAAM,MAAO,KAAM,QAAS,KAAM,QAAS,IAAI,CAAE,EAC9Eb,EAAe,SAAW,GAC1B,MACH,CAED,MAAMc,EAAO,KAAK,UAAUD,CAAK,EACjC,KAAK,gBAAgBC,CAAI,CAC5B,EAAE,GAAI,CACV,CAED,UAAUC,EAAI,CAMV,MAAMC,EAAO,KAAK,eAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC/CE,EAAQ,KAAK,eAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACzDG,EAAU,KAAK,eAAe,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAAC,EACtEI,EAAU,KAAK,eAAe,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvF,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAED,eAAeC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CAED,gBAAgB,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC/ClB,EAAc,YAAce,EAC5Bd,EAAe,YAAce,EAC7Bd,EAAiB,YAAce,EAC/Bd,EAAiB,YAAce,CAClC,CACL,CACA,MAAME,EAAQ,IAAIX,EAElBL,EAAS,iBAAiB,QAASgB,EAAM,MAAM,KAAKA,CAAK,CAAC,EAE1DC,EAAU,mBAAoBf,CAAO"}